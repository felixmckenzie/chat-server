type Query {
  hello: String
}

input UserRegisterInput {
  givenName: String
  familyName: String
  email: String
  password: String
  mobilePhone: String
  isActive: Boolean
  avatar: String
  role: Role
}

input UserInput {
  id: Int!
  email: String!
}

type User {
  id: Int!
  createdAt: DateTime
  updatedAt: DateTime
  email: String!
  password: String!
  avatar: String
  mobilePhone: String!
  givenName: String!
  familyName: String!
  role: Role!
  isActive: Boolean!
  chats: [Chat!]!
  contacts: [Contact!]!
}

type Contact {
  id: Int!
  user: User!
  contactUser: User!
}

enum Role {
  ADMIN
  REGULAR
}

type Chat {
  id: Int!
  name: String!
  users: [User!]!
  messages: [Message!]!
  isGroupChat: Boolean!
}

type Message {
  id: Int!
  text: String!
  sender: User!
  chat: Chat!
  timestamp: DateTime!
}

type Query {
  getChat(id: Int!): Chat
  getUser(id: Int!): User
  getAllUserChats(userInput: UserInput!): [Chat]!
  messages(chatId: Int!): [Message!]!
}

type Mutation {
  createChat(name: String!, userIds: [Int!]!, isGroupChat: Boolean!): Chat!
  addUsersToChat(chatId: ID!, userIds: [Int!]!): Chat!
  removeUsersFromChat(chatId: ID!, userIds: [Int!]!): Chat!
  createMessage(text: String!, senderId: ID!, chatId: Int!): Message!
  createUser(input: UserRegisterInput!): AuthPayload!
}

type AuthPayload {
  user: User!
  token: String!
}

type Subscription {
  messageSent(chatId: Int!): Message!
}

scalar DateTime
