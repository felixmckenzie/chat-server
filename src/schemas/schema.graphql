type Query {
  hello: String
}

input UserRegisterInput {
  givenName: String
  familyName: String
  email: String
  isActive: Boolean
  avatar: String
  role: Role
}

input CreateChannelInput {
  name: String
  userIds: [Int!]!
}

input UserInput {
  id: Int!
  email: String!
}

type User {
  id: Int!
  createdAt: DateTime
  updatedAt: DateTime
  email: String!
  avatar: String
  givenName: String!
  familyName: String!
  role: Role!
  isActive: Boolean!
  channels: [Channel!]!
  contacts: [Contact!]!
  messages: [Message!]!
}

type Contact {
  id: Int!
  user: User!
  contactUser: User!
}

enum Role {
  ADMIN
  REGULAR
}

type Channel {
  id: Int!
  name: String!
  members: [User!]!
  messages: [Message!]!
  isGroupChat: Boolean!
}

type Message {
  id: Int!
  text: String!
  sender: User!
  channel: Channel
  timestamp: DateTime!
}

type Query {
  getChannel(id: Int!): Channel
  getUser(id: Int!): User
  getAllUserChannels(userInput: UserInput!): [Channel!]!
  messages(channelId: Int!): [Message!]!
}

type Mutation {
  createChannel(input: CreateChannelInput!): Channel!
  addUsersToChannel(chatId: Int!, userIds: [Int!]!): Channel!
  removeUsersFromChannel(channelId: Int!, userIds: [Int!]!): Channel!
  createMessage(text: String!, senderId: Int!, channelId: Int!): Message!
  createUser(input: UserRegisterInput!): AuthPayload!
}

type AuthPayload {
  user: User!
  token: String!
}

type Subscription {
  messageSent(channelId: Int!): Message!
}

scalar DateTime
